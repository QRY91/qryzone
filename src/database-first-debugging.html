---
layout: base.njk
title: Database-first debugging - qry.zone
description: When the problem is in the data, not the code
---

<article class="article">
    <header class="article-header">
        <span class="status-badge status-seedling">seedling</span>
        <h1>Database-first debugging</h1>
        <p class="article-subtitle">A lesson from production firefighting</p>
    </header>

    <section>
        <blockquote>
            "Assuming that a breakage is caused by a code change is often true, but not always.
            If we had spent less time looking at the recent changes, and more time looking at the
            database itself, we would have found it much faster."
        </blockquote>

        <p>
            From a production debugging session. We were chasing a performance issue through git
            blame and commit diffs for hours. The actual problem was 12.8 million stale database
            records - damcologs where only 27k contained actual content.
        </p>

        <p>
            After cleanup: 406,624 records. Down from 13,279,954. Integration server CPU usage
            dropped immediately. The "bug" wasn't in the code at all.
        </p>
    </section>

    <section>
        <h2>The pattern</h2>
        <p>
            When something breaks, the instinct is to look at what changed recently. git diff,
            recent commits, recent deploys. This is usually right. But when it's wrong, you
            burn hours.
        </p>
        <p>
            Sometimes the problem has been there for months, slowly accumulating until it tips
            over. The database grew. The load changed. Something external shifted.
        </p>
        <p>
            <strong style="color: var(--color-accent)">The fix:</strong> Before diving into
            code archaeology, spend 10 minutes looking at the actual data. Database size, record
            counts, query performance. Often the answer is sitting there, waiting.
        </p>
    </section>

    <footer class="article-footer">
        <p>From work notes, May 2022. Mileviewer performance investigation.</p>
    </footer>
</article>
