---
layout: false
permalink: /fun/sierpinski/
---
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Sierpinski triangle and chaos game fractal generator" />
        <title>Sierpinski Playground</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&family=Atkinson+Hyperlegible+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/assets/css/fun-pages.css">

        <style>
            :root {
                --accent: #00ffd5;
                --accent-rgb: 0, 255, 213;
                --accent-dim: rgba(0, 255, 213, 0.3);
                --accent-glow: rgba(0, 255, 213, 0.15);
            }

            #canvas {
                cursor: crosshair;
                touch-action: none;
            }

            button.primary:hover {
                background: rgba(0, 255, 213, 0.25);
            }

            .slider-control input[type="range"] { width: 100px; }

            .presets-label {
                font-size: 0.75rem;
                color: var(--text-secondary);
                margin-right: 0.25rem;
            }

            .modal code {
                background: var(--bg-elevated);
                padding: 0.1rem 0.3rem;
                border-radius: 3px;
                color: var(--accent);
            }

            @media (max-width: 480px) {
                .slider-control input[type="range"] { width: 80px; }
            }
        </style>
    </head>
    <body>
        <a href="/fun/" class="back-link">← back</a>
        <button class="top-btn fullscreen-btn" id="fullscreenBtn" title="Fullscreen (F)">⛶</button>
        <button class="top-btn help-btn" id="helpBtn" title="Help (?)">?</button>

        <header class="game-header">
            <h1 class="game-title">Sierpinski Playground</h1>
            <div class="stats-bar">
                <div class="stat">
                    <span class="stat-label">Points:</span>
                    <span class="stat-value" id="pointCount">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Vertices:</span>
                    <span class="stat-value" id="vertexCount">3</span>
                </div>
                <div class="stat">
                    <span class="stat-label" id="statusLabel">Running</span>
                </div>
            </div>
        </header>

        <div class="canvas-container">
            <canvas id="canvas"></canvas>
        </div>

        <div class="controls">
            <div class="control-row">
                <button class="primary" id="playPauseBtn">Pause</button>
                <button id="clearBtn">Clear</button>
                <button id="rerollBtn">Reroll Vertices</button>
            </div>
            <div class="control-row">
                <div class="slider-control">
                    <span class="slider-label">Vertices:</span>
                    <input type="range" id="vertexSlider" min="3" max="8" value="3">
                    <span class="slider-value" id="vertexDisplay">3</span>
                </div>
                <div class="slider-control">
                    <span class="slider-label">Jump:</span>
                    <input type="range" id="jumpSlider" min="30" max="70" value="50">
                    <span class="slider-value" id="jumpDisplay">0.50</span>
                </div>
                <div class="slider-control">
                    <span class="slider-label">Speed:</span>
                    <input type="range" id="speedSlider" min="1" max="500" value="100">
                </div>
            </div>
            <div class="control-row">
                <span class="presets-label">Presets:</span>
                <button data-preset="sierpinski">Sierpinski</button>
                <button data-preset="square">Square</button>
                <button data-preset="pentagon">Pentagon</button>
                <button data-preset="hexagon">Hexagon</button>
                <button data-preset="vicsek">Vicsek</button>
            </div>
            <div class="control-row">
                <span class="presets-label">Colors:</span>
                <button data-color="cyan" class="active">Cyan</button>
                <button data-color="rainbow">Rainbow</button>
                <button data-color="fire">Fire</button>
                <button data-color="matrix">Matrix</button>
            </div>
        </div>

        <!-- Help Modal -->
        <div class="modal-overlay" id="helpModal">
            <div class="modal">
                <h2>Chaos Game</h2>
                <p>Watch the <a href="https://en.wikipedia.org/wiki/Sierpi%C5%84ski_triangle" target="_blank" style="color: var(--accent)">Sierpinski triangle</a> (and other fractals) emerge from the <a href="https://en.wikipedia.org/wiki/Chaos_game" target="_blank" style="color: var(--accent)">chaos game</a> algorithm:</p>
                <ul>
                    <li>Start with a random point</li>
                    <li>Pick a random vertex</li>
                    <li>Move halfway (or by jump ratio) toward it</li>
                    <li>Plot a point and repeat</li>
                </ul>
                <p><strong>Controls:</strong></p>
                <ul>
                    <li><strong>Vertices</strong> - Number of polygon corners (3-8)</li>
                    <li><strong>Jump</strong> - Distance to move toward vertex (0.3-0.7)</li>
                    <li><strong>Speed</strong> - Points per frame</li>
                </ul>
                <p><strong>Presets:</strong></p>
                <ul>
                    <li><code>Sierpinski</code> - Classic triangle (3 vertices, 0.5 jump)</li>
                    <li><code>Square</code> - 4 vertices, 0.5 jump (fills the square)</li>
                    <li><code>Pentagon</code> - 5 vertices, 0.618 jump (golden ratio)</li>
                    <li><code>Vicsek</code> - 5 vertices in + pattern, 0.33 jump</li>
                </ul>
                <p><strong>Keyboard:</strong></p>
                <ul>
                    <li><strong>Space</strong> - Play/Pause</li>
                    <li><strong>C</strong> - Clear</li>
                    <li><strong>R</strong> - Reroll vertices</li>
                    <li><strong>F</strong> - Fullscreen</li>
                    <li><strong>1-6</strong> - Quick vertex count</li>
                </ul>
                <button class="modal-close" id="closeHelp">Got it</button>
            </div>
        </div>

        <script>
            // Configuration
            const POINT_SIZE = 1;

            // State
            let vertices = [];
            let currentPoint = { x: 0, y: 0 };
            let pointCount = 0;
            let running = true;
            let pointsPerFrame = 100;
            let jumpRatio = 0.5;
            let numVertices = 3;
            let colorMode = 'cyan';
            let lastVertexIndex = -1;

            // Canvas
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            // Color palettes
            const COLORS = {
                cyan: (i) => `rgba(0, 255, 213, 0.8)`,
                rainbow: (i) => `hsl(${(i * 60) % 360}, 100%, 60%)`,
                fire: (i) => `hsl(${20 + (i * 8) % 40}, 100%, ${50 + (i * 5) % 30}%)`,
                matrix: (i) => `rgba(0, ${180 + (i * 20) % 75}, 0, 0.9)`
            };

            // Presets
            const PRESETS = {
                sierpinski: { vertices: 3, jump: 0.5, custom: null },
                square: { vertices: 4, jump: 0.5, custom: null },
                pentagon: { vertices: 5, jump: 0.618, custom: null },
                hexagon: { vertices: 6, jump: 0.667, custom: null },
                vicsek: {
                    vertices: 5,
                    jump: 0.33,
                    custom: (w, h, padding) => {
                        const cx = w / 2, cy = h / 2;
                        const r = Math.min(w, h) / 2 - padding;
                        return [
                            { x: cx, y: cy },           // center
                            { x: cx, y: cy - r },       // top
                            { x: cx + r, y: cy },       // right
                            { x: cx, y: cy + r },       // bottom
                            { x: cx - r, y: cy }        // left
                        ];
                    }
                }
            };

            // Initialize
            function init() {
                const container = document.querySelector('.canvas-container');
                const maxWidth = container.clientWidth - 20;
                const maxHeight = container.clientHeight - 20;

                const size = Math.min(maxWidth, maxHeight, 700);
                canvas.width = size;
                canvas.height = size;

                generateVertices();
                resetPoint();
                clear();
            }

            // Generate polygon vertices
            function generateVertices(customGenerator = null) {
                const padding = 40;
                const w = canvas.width;
                const h = canvas.height;

                if (customGenerator) {
                    vertices = customGenerator(w, h, padding);
                } else {
                    vertices = [];
                    const cx = w / 2;
                    const cy = h / 2;
                    const radius = Math.min(w, h) / 2 - padding;

                    for (let i = 0; i < numVertices; i++) {
                        const angle = (i * 2 * Math.PI / numVertices) - Math.PI / 2;
                        vertices.push({
                            x: cx + radius * Math.cos(angle),
                            y: cy + radius * Math.sin(angle)
                        });
                    }
                }

                document.getElementById('vertexCount').textContent = vertices.length;
            }

            // Reset current point to random position
            function resetPoint() {
                currentPoint = {
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height
                };
            }

            // Clear canvas
            function clear() {
                ctx.fillStyle = '#0a0a0f';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Draw vertices as small circles
                vertices.forEach((v, i) => {
                    ctx.beginPath();
                    ctx.arc(v.x, v.y, 4, 0, Math.PI * 2);
                    ctx.fillStyle = COLORS[colorMode](i);
                    ctx.fill();
                });

                pointCount = 0;
                updateStats();
                resetPoint();
                lastVertexIndex = -1;
            }

            // Chaos game step
            function step() {
                // Pick random vertex
                let vertexIndex;
                do {
                    vertexIndex = Math.floor(Math.random() * vertices.length);
                } while (vertices.length > 2 && vertexIndex === lastVertexIndex && numVertices === 4);
                // Note: for square, we prevent same vertex twice (creates better pattern)

                lastVertexIndex = vertexIndex;
                const vertex = vertices[vertexIndex];

                // Move toward vertex
                currentPoint.x += (vertex.x - currentPoint.x) * jumpRatio;
                currentPoint.y += (vertex.y - currentPoint.y) * jumpRatio;

                // Plot point
                ctx.fillStyle = COLORS[colorMode](vertexIndex);
                ctx.fillRect(
                    Math.round(currentPoint.x),
                    Math.round(currentPoint.y),
                    POINT_SIZE,
                    POINT_SIZE
                );

                pointCount++;
            }

            // Update stats display
            function updateStats() {
                document.getElementById('pointCount').textContent = pointCount.toLocaleString();
                document.getElementById('statusLabel').textContent = running ? 'Running' : 'Paused';
            }

            // Animation loop
            function animate() {
                if (running) {
                    for (let i = 0; i < pointsPerFrame; i++) {
                        step();
                    }
                    updateStats();
                }
                requestAnimationFrame(animate);
            }

            // Controls
            const playPauseBtn = document.getElementById('playPauseBtn');
            playPauseBtn.addEventListener('click', () => {
                running = !running;
                playPauseBtn.textContent = running ? 'Pause' : 'Play';
                updateStats();
            });

            document.getElementById('clearBtn').addEventListener('click', clear);

            document.getElementById('rerollBtn').addEventListener('click', () => {
                generateVertices();
                clear();
            });

            // Vertex slider
            const vertexSlider = document.getElementById('vertexSlider');
            const vertexDisplay = document.getElementById('vertexDisplay');
            vertexSlider.addEventListener('input', (e) => {
                numVertices = parseInt(e.target.value);
                vertexDisplay.textContent = numVertices;
                generateVertices();
                clear();
            });

            // Jump slider
            const jumpSlider = document.getElementById('jumpSlider');
            const jumpDisplay = document.getElementById('jumpDisplay');
            jumpSlider.addEventListener('input', (e) => {
                jumpRatio = parseInt(e.target.value) / 100;
                jumpDisplay.textContent = jumpRatio.toFixed(2);
            });

            // Speed slider
            const speedSlider = document.getElementById('speedSlider');
            speedSlider.addEventListener('input', (e) => {
                pointsPerFrame = parseInt(e.target.value);
            });

            // Preset buttons
            document.querySelectorAll('[data-preset]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const preset = PRESETS[btn.dataset.preset];
                    if (!preset) return;

                    numVertices = preset.vertices;
                    jumpRatio = preset.jump;

                    vertexSlider.value = numVertices;
                    vertexDisplay.textContent = numVertices;
                    jumpSlider.value = Math.round(jumpRatio * 100);
                    jumpDisplay.textContent = jumpRatio.toFixed(2);

                    generateVertices(preset.custom);
                    clear();
                });
            });

            // Color buttons
            document.querySelectorAll('[data-color]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('[data-color]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    colorMode = btn.dataset.color;
                    clear();
                });
            });

            // Help modal
            const helpModal = document.getElementById('helpModal');
            document.getElementById('helpBtn').addEventListener('click', () => {
                helpModal.classList.add('show');
            });
            document.getElementById('closeHelp').addEventListener('click', () => {
                helpModal.classList.remove('show');
            });
            helpModal.addEventListener('click', (e) => {
                if (e.target === helpModal) {
                    helpModal.classList.remove('show');
                }
            });

            // Fullscreen toggle
            let isFullscreen = false;
            const fullscreenBtn = document.getElementById('fullscreenBtn');

            function toggleFullscreen() {
                isFullscreen = !isFullscreen;
                document.body.classList.toggle('fullscreen', isFullscreen);
                fullscreenBtn.title = isFullscreen ? 'Exit Fullscreen (Esc)' : 'Fullscreen (F)';
                setTimeout(() => {
                    init();
                }, 50);
            }

            fullscreenBtn.addEventListener('click', toggleFullscreen);

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.target.tagName === 'INPUT') return;

                switch(e.key.toLowerCase()) {
                    case 'f':
                        toggleFullscreen();
                        break;
                    case 'escape':
                        if (isFullscreen) toggleFullscreen();
                        if (helpModal.classList.contains('show')) {
                            helpModal.classList.remove('show');
                        }
                        break;
                    case ' ':
                        e.preventDefault();
                        running = !running;
                        playPauseBtn.textContent = running ? 'Pause' : 'Play';
                        updateStats();
                        break;
                    case 'c':
                        clear();
                        break;
                    case 'r':
                        generateVertices();
                        clear();
                        break;
                    case '3':
                    case '4':
                    case '5':
                    case '6':
                    case '7':
                    case '8':
                        numVertices = parseInt(e.key);
                        vertexSlider.value = numVertices;
                        vertexDisplay.textContent = numVertices;
                        generateVertices();
                        clear();
                        break;
                }
            });

            // Handle resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(init, 250);
            });

            // Start
            init();
            requestAnimationFrame(animate);
        </script>
    </body>
</html>
